Руководство крупного интернет магазина, \
у которого постоянно растёт пользовательская база и \
количество заказов рассматривает возможность переделки своей внутренней ИТ системы на основе микросервисов.

Т.к. нет деталей описания интернет магазина, предположу следующую архитектуру:
1. монолитное приложение, в котором вся функциональность объединена в одном монолитном приложении и frontend и backend;
2. функциональность приложения условно разбивается на следующие функциональные компоненты:
   1. frontend;
   2. аутентификация и регистрация;
   3. отображение товаров и корзина;
   4. система оплаты товаров;
3. приложение stateful.

###### Увеличение числа пользоватей влечет за собой увеличение нагрузки на систему

Решение проблемы для монолитной системы:
Для увеличения производительности возможно вертикальное масштабирование.

Можно увеличить количество ресурсов на серверах на которых развернуто приложение и его реплики, \
т.к. приложение stateful придется увеличить ресурсы на каждой зеркальной реплике. 

С последовательным ростом пользователей количество требуемых ресурсов и реплик будет расти. 

Проблема: с некоторого момента времени такой способ масштабирования станет очень затратным.

###### Расширение, модификация и деплой системы
Проблемы:\
Т.к. система монолитна, то при внесении любых изменений (даже очень маленьких) в код,\
потребуется пересборка и тестирование всей системы целиком,\
для монолитных архитектур этот процесс может занимать довольно много времени (особенно на java).

Кодовая база сильно растет, и как правило, сильно связна,\
что рано или поздно приведет к тому,\
что внесение даже небольших бизнес изменений в приложении потребует внесение модификаций в большом количестве мест в коде.

Усложняется работа над приложением нескольких команд разработки параллельно. 
Т.к. увеличивается вероятность возникновения конфликтов, что увеличивает время выкатки feature для тестирования.

Замедляется процесс тестирования и его стоимость,\ 
т.к. для тестирования каждой feature требуется либо отдельный стенд, либо последовательное тестирование features.

Все перечисленное выше, увеличивает time to market для выкатки даже небольших фичей,\
усложняет планирование релизов, т.к. откат фичей и фикс багов будет занимать много времени и требовать тестирования всей системы.

###### Преимущество монолитных систем

1. позволяет довольно быстро сделать MVP;
2. упрощает мониторинг системы; 
3. упрощает автоматизацию тестирования системы, т.к. нет проблем с взаимной интеграцией компонент приложения;
4. отсутствует необходимость оркестрации, простота реализации sticky sessions;
5. упрощает обеспечение отказоустойчивости, при недоступности какой-то реплики довольно легко переключиться на другую;
6. упрощает деплой и CI-CD, т.е. требуется обновить всего одно приложение.

###### Преимущество перехода на микросервисы

Исходя из предположений об архитектуре монолита,\
можно каждый из пунктов разрабатывать и поддерживать отдельно друг от друга, 
т.к. с точки зрения бизнес модели данных они независимы.

Первичное разбиение: "тонкий" frontend и backend.
1. независимый frontend клиент;
2. сервис backend;

Вторичное разбиение: декомпозиция backend:
4. сервисы аутентификации/авторизации;
5. сервисы отображения товаров и потребительской корзины;
6. сервис обработки платежей;
7. сервисы рассылок, доставок, поддержки, сбора метрик и.т.д.

Преимущество разбиения на микросервисы:

1. упрощение масштабирования системы, масштабируем только тот микросервис на который приходится увеличение нагрузки: 
   1. stateless: горизонтально;
   2. stateful: вертикально;
2. уменьшение связности и быстрая реализация feature: упрощение процесса внесения изменений и тестирование кода QA, изменения вносятся в конкретный микорсервис с минимальным воздействием на другие (если не меняются контракты);  
3. возможность кросс командной разработки и упрощение параллельной работы над разными компонентами;
4. упрощение deploy, сокращение времени сборки системы, исправления и локализации багов;
5. упрощение кодовой базы;
6. упрощение интеграции с сторонними сервисами;
7. отсутствует единая точка отказа всей системы.

В итоге: увеличивается time to market, упрощается адаптация под меняющиеся бизнес требования, упрощается компоновка sprint'ов и выкатка релизов, удешевляется и становится более гибким масштабирование системы.

###### Недостатки перехода на микросервисы

1. дороговизна и усложнение организации инфраструктуры: настройка оркестрации трафика и нагрузки, мониторинг и сборка логов требуются для каждого сервиса;
2. усложнение автотестирования: требуется end-to-end тестирование, disaster recovery тестирование, усложнение нагрузочного тестирования;
3. усложнение CI-CD и системы в целом;
4. сложно совместить параллельный переход на микросервисную архитектуру с монолитного решения, когда в процессе требуется учитывать разработку features;
5. в целом переход с монолита на микросервисы -- дорогой и трудозатратный процесс.